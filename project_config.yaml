# project_config.yaml - Configuration complète pour SmartContractDevPipeline
# Version: 3.0.0 (Orchestrateur avancé avec workflows détaillés)
# Date: 2026-02-07
# Structure: Compatible avec SmartContractOrchestrator

project_name: "SmartContractDevPipeline"
project_type: "blockchain_dev_tools"
description: "Pipeline complet de développement de smart contracts avec agents spécialisés et workflows par sprints"
version: "3.0.0"

# ============================================================================
# AGENTS PRINCIPAUX - FORMAT ATTENDU PAR L'ORCHESTRATEUR
# ============================================================================
agents:
  # AGENT BASE - Classe de base pour tous les agents (non instancié)
  base_agent:
    display_name: "Agent de Base"
    specialization: "core_framework"
    config_path: "agents/base_agent/config.yaml"
    agent_type: "abstract_base"
    enabled: true
    instantiate: false
    dependencies: []
    initialization_order: 0
    parent: null
    purpose: "Classe de base abstraite fournissant les fonctionnalités communes à tous les agents"
    mandatory: false

  # AGENT ARCHITECT - Architecture système
  architect:
    display_name: "Architecte Système"
    specialization: "system_architecture"
    config_path: "agents/architect/config.yaml"
    agent_type: "main_agent"
    enabled: true
    instantiate: true
    dependencies: ["base_agent"]
    initialization_order: 1
    parent: null
    purpose: "Conception de l'architecture système et choix technologiques"
    mandatory: true

  # AGENT CODER - Développement code
  coder:
    display_name: "Développeur Principal"
    specialization: "fullstack_development"
    config_path: "agents/coder/config.yaml"
    agent_type: "main_agent"
    enabled: true
    instantiate: true
    dependencies: ["base_agent"]
    initialization_order: 2
    parent: null
    purpose: "Développement du code backend, frontend et intégration"
    mandatory: true

  # AGENT SMART_CONTRACT - Développement blockchain
  smart_contract:
    display_name: "Développeur Smart Contract"
    specialization: "blockchain_development"
    config_path: "agents/smart_contract/config.yaml"
    agent_type: "main_agent"
    enabled: true
    instantiate: true
    dependencies: ["base_agent"]
    initialization_order: 3
    parent: null
    purpose: "Développement, test et déploiement de smart contracts"
    mandatory: true

  # AGENT FRONTEND_WEB3 - Interface utilisateur
  frontend_web3:
    display_name: "Développeur Frontend Web3"
    specialization: "web3_frontend"
    config_path: "agents/frontend_web3/config.yaml"
    agent_type: "main_agent"
    enabled: true
    instantiate: true
    dependencies: ["base_agent"]
    initialization_order: 4
    parent: null
    purpose: "Développement d'interfaces utilisateur Web3 et DApps"
    mandatory: true

  # AGENT TESTER - Tests et qualité
  tester:
    display_name: "Ingénieur Qualité"
    specialization: "quality_assurance"
    config_path: "agents/tester/config.yaml"
    agent_type: "main_agent"
    enabled: true
    instantiate: true
    dependencies: ["base_agent"]
    initialization_order: 5
    parent: null
    purpose: "Tests, audit de sécurité et assurance qualité"
    mandatory: true

  # ==========================================================================
  # SOUS-AGENTS SPÉCIALISÉS - INTÉGRÉS DANS LA SECTION PRINCIPALE
  # ==========================================================================

  # Sous-agents d'ARCHITECTURE
  cloud_architect:
    display_name: "Architecte Cloud"
    specialization: "cloud_architecture"
    config_path: "agents/architect/sous_agents/cloud_architect/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["architect", "base_agent"]
    initialization_order: 6
    parent: "architect"
    purpose: "Conception d'architecture cloud et infrastructure"
    mandatory: false

  blockchain_architect:
    display_name: "Architecte Blockchain"
    specialization: "blockchain_architecture"
    config_path: "agents/architect/sous_agents/blockchain_architect/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["architect", "base_agent"]
    initialization_order: 7
    parent: "architect"
    purpose: "Architecture spécifique blockchain et solutions décentralisées"
    mandatory: false

  microservices_architect:
    display_name: "Architecte Microservices"
    specialization: "microservices_architecture"
    config_path: "agents/architect/sous_agents/microservices_architect/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["architect", "base_agent"]
    initialization_order: 8
    parent: "architect"
    purpose: "Conception d'architecture microservices et APIs"
    mandatory: false

  # Sous-agents de CODAGE
  backend_coder:
    display_name: "Développeur Backend"
    specialization: "backend_development"
    config_path: "agents/coder/sous_agents/backend_coder/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["coder", "base_agent"]
    initialization_order: 9
    parent: "coder"
    purpose: "Développement backend, APIs et services"
    mandatory: false

  frontend_coder:
    display_name: "Développeur Frontend"
    specialization: "frontend_development"
    config_path: "agents/coder/sous_agents/frontend_coder/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["coder", "base_agent"]
    initialization_order: 10
    parent: "coder"
    purpose: "Développement frontend traditionnel (non Web3)"
    mandatory: false

  devops_coder:
    display_name: "Ingénieur DevOps"
    specialization: "devops_infrastructure"
    config_path: "agents/coder/sous_agents/devops_coder/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["coder", "base_agent"]
    initialization_order: 11
    parent: "coder"
    purpose: "CI/CD, infrastructure as code, déploiement"
    mandatory: false

  # Sous-agents de SMART CONTRACT
  solidity_expert:
    display_name: "Expert Solidity"
    specialization: "solidity_development"
    config_path: "agents/smart_contract/sous_agents/solidity_expert/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["smart_contract", "base_agent"]
    initialization_order: 12
    parent: "smart_contract"
    purpose: "Expert en développement Solidity et optimisation"
    mandatory: false

  security_expert:
    display_name: "Expert en Sécurité"
    specialization: "smart_contract_security"
    config_path: "agents/smart_contract/sous_agents/security_expert/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["smart_contract", "base_agent"]
    initialization_order: 13
    parent: "smart_contract"
    purpose: "Audit de sécurité et prévention des vulnérabilités"
    mandatory: false

  gas_optimizer:
    display_name: "Optimiseur de Gas"
    specialization: "gas_optimization"
    config_path: "agents/smart_contract/sous_agents/gas_optimizer/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["smart_contract", "base_agent"]
    initialization_order: 14
    parent: "smart_contract"
    purpose: "Optimisation des coûts de gas et efficacité"
    mandatory: false

  formal_verification:
    display_name: "Expert Vérification Formelle"
    specialization: "formal_verification"
    config_path: "agents/smart_contract/sous_agents/formal_verification/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["smart_contract", "base_agent"]
    initialization_order: 15
    parent: "smart_contract"
    purpose: "Vérification formelle et preuves mathématiques"
    mandatory: false

  # Sous-agents de FRONTEND WEB3
  react_expert:
    display_name: "Expert React/Next.js"
    specialization: "react_nextjs"
    config_path: "agents/frontend_web3/sous_agents/react_expert/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["frontend_web3", "base_agent"]
    initialization_order: 16
    parent: "frontend_web3"
    purpose: "Expert en React, Next.js et frameworks modernes"
    mandatory: false

  web3_integration:
    display_name: "Expert Intégration Web3"
    specialization: "web3_integration"
    config_path: "agents/frontend_web3/sous_agents/web3_integration/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["frontend_web3", "base_agent"]
    initialization_order: 17
    parent: "frontend_web3"
    purpose: "Intégration Web3, wallets et smart contracts"
    mandatory: false

  ui_ux_expert:
    display_name: "Expert UI/UX"
    specialization: "ui_ux_design"
    config_path: "agents/frontend_web3/sous_agents/ui_ux_expert/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["frontend_web3", "base_agent"]
    initialization_order: 18
    parent: "frontend_web3"
    purpose: "Design d'interface utilisateur et expérience utilisateur"
    mandatory: false

  # Sous-agents de TESTING
  unit_tester:
    display_name: "Testeur Unitaire"
    specialization: "unit_testing"
    config_path: "agents/tester/sous_agents/unit_tester/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["tester", "base_agent"]
    initialization_order: 19
    parent: "tester"
    purpose: "Tests unitaires et tests de composants"
    mandatory: false

  integration_tester:
    display_name: "Testeur d'Intégration"
    specialization: "integration_testing"
    config_path: "agents/tester/sous_agents/integration_tester/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["tester", "base_agent"]
    initialization_order: 20
    parent: "tester"
    purpose: "Tests d'intégration et tests système"
    mandatory: false

  e2e_tester:
    display_name: "Testeur End-to-End"
    specialization: "e2e_testing"
    config_path: "agents/tester/sous_agents/e2e_tester/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["tester", "base_agent"]
    initialization_order: 21
    parent: "tester"
    purpose: "Tests end-to-end et tests de scénarios complets"
    mandatory: false

  fuzzing_expert:
    display_name: "Expert Fuzzing"
    specialization: "fuzzing_security"
    config_path: "agents/tester/sous_agents/fuzzing_expert/config.yaml"
    agent_type: "sous_agent"
    enabled: true
    instantiate: true
    dependencies: ["tester", "base_agent"]
    initialization_order: 22
    parent: "tester"
    purpose: "Tests de fuzzing et tests de sécurité avancés"
    mandatory: false

# ============================================================================
# MAPPING DES TÂCHES VERS LES AGENTS (Conservé pour référence)
# ============================================================================
task_mapping:
  # Tâches de base (héritées par tous via base_agent)
  "health_check": ["*"]
  "validate_config": ["*"]
  "get_capabilities": ["*"]
  "execute_with_timeout": ["*"]
  "get_status": ["*"]
  
  # Tâches d'architecture
  "cloud_design": ["architect", "cloud_architect"]
  "blockchain_architecture": ["architect", "blockchain_architect"]
  "microservices_design": ["architect", "microservices_architect"]
  "system_architecture": ["architect", "blockchain_architect"]
  "review_architecture": ["architect"]
  "select_tech_stack": ["architect"]
  "design_system": ["architect"]
  
  # Tâches de développement général
  "backend_development": ["coder", "backend_coder"]
  "frontend_development": ["coder", "frontend_coder"]
  "devops_pipeline": ["coder", "devops_coder"]
  "api_development": ["coder", "backend_coder"]
  "generate_code": ["coder", "backend_coder", "frontend_coder"]
  "debug_code": ["coder", "backend_coder", "frontend_coder"]
  "refactor_code": ["coder"]
  "review_code": ["coder"]
  "setup_infrastructure": ["coder", "devops_coder"]
  "deploy_infrastructure": ["coder", "devops_coder"]
  
  # Tâches de smart contract
  "solidity_development": ["smart_contract", "solidity_expert"]
  "contract_security": ["smart_contract", "security_expert"]
  "gas_optimization": ["smart_contract", "gas_optimizer"]
  "formal_verification_task": ["smart_contract", "formal_verification"]
  "contract_deployment": ["smart_contract", "solidity_expert"]
  "develop_contract": ["smart_contract", "solidity_expert"]
  "audit_contract": ["smart_contract", "security_expert"]
  "deploy_contract": ["smart_contract", "solidity_expert"]
  "optimize_gas": ["smart_contract", "gas_optimizer"]
  "test_contract": ["smart_contract", "solidity_expert"]
  "compile_contract": ["smart_contract"]
  "verify_contract": ["smart_contract", "formal_verification"]
  
  # Tâches de frontend Web3
  "react_development": ["frontend_web3", "react_expert"]
  "web3_integration": ["frontend_web3", "web3_integration"]
  "ui_ux_design": ["frontend_web3", "ui_ux_expert"]
  "dapp_development": ["frontend_web3", "react_expert", "web3_integration"]
  "create_dapp": ["frontend_web3", "react_expert"]
  "design_ui": ["frontend_web3", "ui_ux_expert"]
  "integrate_web3": ["frontend_web3", "web3_integration"]
  "optimize_performance": ["frontend_web3", "react_expert"]
  "create_component": ["frontend_web3", "react_expert"]
  "connect_wallet": ["frontend_web3", "web3_integration"]
  "handle_transactions": ["frontend_web3", "web3_integration"]
  
  # Tâches de test
  "unit_testing": ["tester", "unit_tester"]
  "integration_testing": ["tester", "integration_tester"]
  "e2e_testing": ["tester", "e2e_tester"]
  "fuzzing_test": ["tester", "fuzzing_expert"]
  "security_audit": ["tester", "fuzzing_expert", "security_expert"]
  "run_test_suite": ["tester", "unit_tester", "integration_tester"]
  "performance_test": ["tester", "integration_tester"]
  "load_test": ["tester", "integration_tester"]
  "accessibility_test": ["tester", "e2e_tester"]
  "api_test": ["tester", "integration_tester"]
  "generate_test_report": ["tester"]
  "analyze_test_results": ["tester"]

# ============================================================================
# HIÉRARCHIE ET DÉPENDANCES (Conservé pour référence)
# ============================================================================
agent_hierarchy:
  base_layer:
    - name: "base_agent"
      role: "classe_abstraite"
      children: ["architect", "coder", "smart_contract", "frontend_web3", "tester"]
      description: "Classe de base pour tous les agents, non instanciée"
  
  main_agents_layer:
    - name: "architect"
      role: "architecture"
      children: ["cloud_architect", "blockchain_architect", "microservices_architect"]
      description: "Conception système et choix technologiques"
    
    - name: "coder"
      role: "development"
      children: ["backend_coder", "frontend_coder", "devops_coder"]
      description: "Développement général et intégration"
    
    - name: "smart_contract"
      role: "blockchain_development"
      children: ["solidity_expert", "security_expert", "gas_optimizer", "formal_verification"]
      description: "Développement et audit de smart contracts"
    
    - name: "frontend_web3"
      role: "web3_frontend"
      children: ["react_expert", "web3_integration", "ui_ux_expert"]
      description: "Interfaces utilisateur Web3 et DApps"
    
    - name: "tester"
      role: "quality_assurance"
      children: ["unit_tester", "integration_tester", "e2e_tester", "fuzzing_expert"]
      description: "Tests et assurance qualité"

# ============================================================================
# WORKFLOWS DE DÉVELOPPEMENT
# ============================================================================
workflows:
  test_configuration:
    description: "Test de validation de la configuration complète"
    steps:
      - name: "validate_project_config"
        agent: "architect"
        task: "validate_config"
        data:
          config_file: "project_config.yaml"
          validate_agents: true
          validate_paths: true
      
      - name: "health_check_all_agents"
        agent: "architect"
        task: "health_check"
        data:
          check_all_agents: true
          timeout: 30
  
  development_pipeline:
    description: "Pipeline complet de développement de smart contract"
    steps:
      - name: "design_system_architecture"
        agent: "architect"
        task: "system_architecture"
        data:
          requirements_file: "requirements/system_requirements.json"
          output_format: "mermaid_diagrams"
      
      - name: "develop_smart_contract"
        agent: "smart_contract"
        task: "solidity_development"
        data:
          contract_specs: "contracts/erc20_token.spec.json"
          output_dir: "contracts/build/"
      
      - name: "audit_contract_security"
        agent: "security_expert"
        task: "contract_security"
        data:
          contract_file: "contracts/build/ERC20Token.sol"
          audit_level: "comprehensive"
      
      - name: "develop_frontend_dapp"
        agent: "frontend_web3"
        task: "dapp_development"
        data:
          design_file: "ui/dapp_design.figma.json"
          contract_abi: "contracts/build/ERC20Token.abi.json"
      
      - name: "run_comprehensive_tests"
        agent: "tester"
        task: "run_test_suite"
        data:
          test_types: ["unit", "integration", "e2e", "security"]
          coverage_target: 95

# ============================================================================
# CONFIGURATION DE L'ORCHESTRATEUR
# ============================================================================
orchestrator:
  health_check_interval: 30  # secondes
  task_timeout: 300  # secondes (5 minutes)
  max_concurrent_tasks: 5
  log_level: "INFO"
  log_file: "logs/orchestrator.log"
  enable_debug_mode: true
  auto_recover_errors: true
  max_retry_attempts: 3
  
  monitoring:
    enable_prometheus: false
    metrics_port: 9090
    enable_health_dashboard: true
    dashboard_port: 8080
  
  performance:
    enable_caching: true
    cache_ttl: 3600  # 1 heure
    enable_compression: true
    max_memory_mb: 1024

# ============================================================================
# CHEMINS ET RÉPERTOIRES
# ============================================================================
paths:
  agents_directory: "agents/"
  configs_directory: "configs/"
  contracts_directory: "contracts/"
  tests_directory: "tests/"
  logs_directory: "logs/"
  outputs_directory: "outputs/"
  temp_directory: "temp/"
  
  templates:
    agent_template: "templates/agent_template.yaml"
    contract_template: "templates/contract_template.sol"
    test_template: "templates/test_template.js"

# ============================================================================
# ENVIRONNEMENTS DE DÉPLOIEMENT
# ============================================================================
environments:
  development:
    blockchain_network: "hardhat"
    rpc_url: "http://localhost:8545"
    chain_id: 31337
    enable_auto_mining: true
    gas_price: "auto"
    
  testnet:
    blockchain_network: "sepolia"
    rpc_url: "${SEPOLIA_RPC_URL}"
    chain_id: 11155111
    gas_price: "auto"
    explorer_url: "https://sepolia.etherscan.io"
    
  mainnet:
    blockchain_network: "ethereum"
    rpc_url: "${MAINNET_RPC_URL}"
    chain_id: 1
    gas_price: "priority"
    explorer_url: "https://etherscan.io"

# ============================================================================
# SÉCURITÉ ET SECRETS
# ============================================================================
security:
  secrets_manager: "environment_variables"
  encrypted_secrets: false
  
  required_env_vars:
    - "MAINNET_RPC_URL"
    - "SEPOLIA_RPC_URL"
    - "ETHERSCAN_API_KEY"
    - "ALCHEMY_API_KEY"
  
  sensitive_files:
    - "**/*.env"
    - "**/secrets*.yaml"
    - "**/private_keys.*"
  
  validation_rules:
    - "no_secrets_in_code"
    - "validate_env_vars_on_startup"
    - "encrypt_sensitive_data"

# ============================================================================
# VERSIONS ET COMPATIBILITÉ
# ============================================================================
compatibility:
  min_python_version: "3.10"
  node_version: ">=18.0.0"
  solidity_version: ">=0.8.0"
  
  required_packages:
    python:
      - "fastapi>=0.104.0"
      - "pydantic>=2.5.0"
      - "web3>=6.0.0"
      - "pyyaml>=6.0"
    
    nodejs:
      - "react>=18.0.0"
      - "next>=14.0.0"
      - "ethers>=6.0.0"
      - "wagmi>=1.0.0"
  
  tested_platforms:
    - "ubuntu:22.04"
    - "macos:ventura"
    - "windows:11"