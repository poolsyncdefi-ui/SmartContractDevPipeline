<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìú Smart Contract Agent - Tra√ßabilit√© compl√®te</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            background: #f5f7fa;
            padding: 30px;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .header {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .header h1 {
            font-size: 28px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-back {
            background: white;
            color: #f59e0b;
            padding: 10px 20px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 500;
            transition: 0.2s;
        }
        
        .btn-back:hover {
            transform: translateX(-5px);
        }
        
        .filters-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .filters-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .filter-select {
            padding: 10px 12px;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            font-size: 14px;
        }
        
        .filter-badge {
            background: #f59e0b;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
        }
        
        .reset-btn {
            background: #f3f4f6;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            margin-top: 20px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: 0.2s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            border-left: 4px solid #f59e0b;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #1a1e24;
        }
        
        .contracts-table-container {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            overflow-x: auto;
        }
        
        .contracts-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .contracts-table th {
            text-align: left;
            padding: 15px 12px;
            background: #f9fafb;
            color: #4b5563;
            font-weight: 600;
            font-size: 13px;
            border-bottom: 2px solid #e5e7eb;
        }
        
        .contracts-table td {
            padding: 15px 12px;
            border-bottom: 1px solid #e5e7eb;
            vertical-align: top;
        }
        
        .contracts-table tbody tr {
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .contracts-table tbody tr:hover {
            background: #f9fafb;
        }
        
        .contract-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-deployed { background: #d1fae5; color: #065f46; }
        .status-audited { background: #c7d2fe; color: #3730a3; }
        .status-testnet { background: #fed7aa; color: #92400e; }
        .status-production { background: #10b981; color: white; }
        
        .network-badge {
            background: #e5e7eb;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            margin-right: 5px;
        }
        
        .sprint-badge {
            background: #e5e7eb;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
        }
        
        .contract-detail {
            display: none;
            background: #f9fafb;
            padding: 25px;
            border-radius: 15px;
            margin-top: 15px;
        }
        
        .contract-detail.active {
            display: block;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .synthesis-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border-left: 4px solid #f59e0b;
            margin-bottom: 20px;
            grid-column: span 2;
        }
        
        .synthesis-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .address-list {
            list-style: none;
            padding: 0;
        }
        
        .address-list li {
            padding: 10px 0;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: monospace;
        }
        
        .address-link {
            color: #f59e0b;
            text-decoration: none;
            font-size: 13px;
        }
        
        .address-link:hover {
            text-decoration: underline;
        }
        
        .code-block {
            background: #1a1e24;
            color: #f8fafc;
            padding: 15px;
            border-radius: 10px;
            font-family: 'Fira Code', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .abi-preview {
            max-height: 200px;
            overflow-y: auto;
            background: #1a1e24;
            color: #f8fafc;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 12px;
        }
        
        .gas-meter {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .gas-fill {
            height: 100%;
            background: #f59e0b;
            border-radius: 4px;
        }
        
        .footer {
            margin-top: 30px;
            text-align: center;
            color: #666;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div>
                <h1><span>üìú</span> Smart Contract Agent - Tra√ßabilit√©</h1>
                <div style="margin-top: 10px; opacity: 0.9;">
                    23 contrats ‚Ä¢ 12 d√©ploy√©s ‚Ä¢ 8 audit√©s
                </div>
            </div>
            <a href="../index.html" class="btn-back">‚Üê Portail</a>
        </div>
        
        <!-- Filtres -->
        <div class="filters-section">
            <div class="filters-title">
                <span>üîç</span> Filtres
                <span class="filter-badge" id="result-count">12 r√©sultats</span>
            </div>
            
            <div class="filters-grid">
                <div class="filter-group">
                    <label>Sprint</label>
                    <select class="filter-select" id="filter-sprint">
                        <option value="SPRINT-000" selected>SPRINT-000 (en cours)</option>
                        <option value="SPRINT-001">SPRINT-001</option>
                        <option value="SPRINT-002">SPRINT-002</option>
                        <option value="all">Tous</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Statut</label>
                    <select class="filter-select" id="filter-status">
                        <option value="all">Tous</option>
                        <option value="deployed">‚úÖ D√©ploy√©</option>
                        <option value="audited">üî¨ Audit√©</option>
                        <option value="testnet">üåê Testnet</option>
                        <option value="production">üöÄ Production</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>R√©seau</label>
                    <select class="filter-select" id="filter-network">
                        <option value="all">Tous</option>
                        <option value="sepolia">Sepolia</option>
                        <option value="mainnet">Mainnet</option>
                        <option value="polygon">Polygon</option>
                        <option value="arbitrum">Arbitrum</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Version Solidity</label>
                    <select class="filter-select" id="filter-version">
                        <option value="all">Toutes</option>
                        <option value="0.8.19">0.8.19</option>
                        <option value="0.8.18">0.8.18</option>
                        <option value="0.8.17">0.8.17</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label>Standard</label>
                    <select class="filter-select" id="filter-standard">
                        <option value="all">Tous</option>
                        <option value="ERC20">ERC20</option>
                        <option value="ERC721">ERC721</option>
                        <option value="ERC1155">ERC1155</option>
                    </select>
                </div>
            </div>
            
            <button class="reset-btn" onclick="resetFilters()">R√©initialiser</button>
        </div>
        
        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card" onclick="filterByStatus('deployed')">
                <div class="stat-value">12</div>
                <div>Contrats d√©ploy√©s</div>
            </div>
            <div class="stat-card" onclick="filterByStatus('audited')">
                <div class="stat-value">8</div>
                <div>Audits formels</div>
            </div>
            <div class="stat-card" onclick="filterByNetwork('mainnet')">
                <div class="stat-value">3</div>
                <div>Sur Mainnet</div>
            </div>
            <div class="stat-card" onclick="filterByStandard('ERC20')">
                <div class="stat-value">15</div>
                <div>ERC20</div>
            </div>
        </div>
        
        <!-- Tableau -->
        <div class="contracts-table-container">
            <table class="contracts-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Contrat</th>
                        <th>Sprint</th>
                        <th>Version</th>
                        <th>Fichiers</th>
                        <th>Adresse</th>
                        <th>R√©seaux</th>
                        <th>Statut</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    <!-- SC_001 - Token ERC20 -->
                    <tr onclick="toggleDetail('sc001-detail')">
                        <td><strong>SC_001</strong></td>
                        <td>Token ERC20</td>
                        <td><span class="sprint-badge">SPRINT-000</span></td>
                        <td>0.8.19</td>
                        <td>Token.sol</td>
                        <td style="font-family: monospace;">0x742...3f2a</td>
                        <td><span class="network-badge">Sepolia</span><span class="network-badge">Mainnet</span></td>
                        <td><span class="contract-status status-production">üöÄ Production</span></td>
                    </tr>
                    <tr id="sc001-detail" style="display: none;">
                        <td colspan="8">
                            <div class="contract-detail active">
                                <!-- Synth√®se SC_001 -->
                                <div class="synthesis-card">
                                    <div class="synthesis-title">üìã Synth√®se SC_001 - Token ERC20</div>
                                    
                                    <div class="synthesis-text">
                                        <strong>Objectif :</strong> Token standard pour l'application DeFi avec mint/burn et contr√¥les d'acc√®s.
                                        <br><strong>Patterns :</strong> Ownable, ERC20, ReentrancyGuard
                                    </div>
                                    
                                    <!-- FICHIERS -->
                                    <div style="margin: 20px 0;">
                                        <h4>üìÅ Fichiers</h4>
                                        <ul class="address-list">
                                            <li><strong>contracts/Token.sol</strong> <span class="network-badge">contrat principal</span></li>
                                            <li><strong>contracts/interfaces/IToken.sol</strong> <span class="network-badge">interface</span></li>
                                            <li><strong>test/Token.t.sol</strong> <span class="network-badge">tests Foundry</span></li>
                                            <li><strong>scripts/deploy_token.js</strong> <span class="network-badge">d√©ploiement</span></li>
                                        </ul>
                                    </div>
                                    
                                    <!-- ADRESSES DE D√âPLOIEMENT -->
                                    <div style="margin: 20px 0;">
                                        <h4>üåê Adresses d√©ploy√©es</h4>
                                        <ul class="address-list">
                                            <li>
                                                <span><strong>Sepolia</strong> - 0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb0</span>
                                                <a href="#" class="address-link">Voir sur Etherscan ‚Üí</a>
                                            </li>
                                            <li>
                                                <span><strong>Mainnet</strong> - 0x8f3Cf7ad23Cd3CaDbD9735AFf958F239cF3B7Bd5</span>
                                                <a href="#" class="address-link">Voir sur Etherscan ‚Üí</a>
                                            </li>
                                            <li>
                                                <span><strong>Polygon</strong> - 0x7ceB23fD6bC0adD59E62aC25578270cFf1b9f619</span>
                                                <a href="#" class="address-link">Voir sur Polygonscan ‚Üí</a>
                                            </li>
                                        </ul>
                                    </div>
                                    
                                    <!-- ABI -->
                                    <div style="margin: 20px 0;">
                                        <h4>üìÑ ABI (extrait)</h4>
                                        <div class="abi-preview">
[
  {
    "inputs": [],
    "name": "name",
    "outputs": [{"internalType": "string", "name": "", "type": "string"}],
    "stateMutability": "view",
    "type": "function"
  },
  {
    "inputs": [{"internalType": "address", "name": "to", "type": "address"}, 
               {"internalType": "uint256", "name": "amount", "type": "uint256"}],
    "name": "transfer",
    "outputs": [{"internalType": "bool", "name": "", "type": "bool"}],
    "stateMutability": "nonpayable",
    "type": "function"
  }
]
                                        </div>
                                    </div>
                                    
                                    <!-- M√âTRIQUES -->
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                                        <div>
                                            <h4>‚õΩ Gas</h4>
                                            <div>D√©ploiement: 1.24M gas</div>
                                            <div class="gas-meter"><div class="gas-fill" style="width: 62%"></div></div>
                                            <div>Transfer: 46,523 gas</div>
                                            <div class="gas-meter"><div class="gas-fill" style="width: 23%"></div></div>
                                        </div>
                                        <div>
                                            <h4>üî¨ Audit</h4>
                                            <div>‚úÖ 12/12 propri√©t√©s v√©rifi√©es</div>
                                            <div>‚úÖ SWC-107 (reentrancy) : prot√©g√©</div>
                                            <div>‚úÖ SWC-101 (overflow) : safe</div>
                                        </div>
                                    </div>
                                    
                                    <!-- CODE EXEMPLE -->
                                    <div style="margin: 20px 0;">
                                        <h4>üìù Code principal</h4>
                                        <div class="code-block">
// contracts/Token.sol
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/security/ReentrancyGuard.sol";

contract Token is ERC20, Ownable, ReentrancyGuard {
    event Mint(address indexed to, uint256 amount);
    event Burn(address indexed from, uint256 amount);
    
    constructor() ERC20("MyToken", "MTK") {
        _mint(msg.sender, 1_000_000 * 10**decimals());
    }
    
    function mint(address to, uint256 amount) external onlyOwner nonReentrant {
        _mint(to, amount);
        emit Mint(to, amount);
    }
    
    function burn(uint256 amount) external nonReentrant {
        _burn(msg.sender, amount);
        emit Burn(msg.sender, amount);
    }
}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    
                    <!-- SC_002 - Staking Pool -->
                    <tr onclick="toggleDetail('sc002-detail')">
                        <td><strong>SC_002</strong></td>
                        <td>Staking Pool</td>
                        <td><span class="sprint-badge">SPRINT-000</span></td>
                        <td>0.8.19</td>
                        <td>Staking.sol</td>
                        <td style="font-family: monospace;">0x8f3C...7Bd5</td>
                        <td><span class="network-badge">Sepolia</span></td>
                        <td><span class="contract-status status-testnet">üåê Testnet</span></td>
                    </tr>
                    <tr id="sc002-detail" style="display: none;">
                        <td colspan="8">
                            <div class="contract-detail active">
                                <div class="synthesis-card" style="border-left-color: #ef4444;">
                                    <div class="synthesis-title" style="color: #ef4444;">‚ö†Ô∏è Analyse - SC_002 Staking Pool</div>
                                    
                                    <!-- FICHIERS -->
                                    <div style="margin: 20px 0;">
                                        <h4>üìÅ Fichiers</h4>
                                        <ul class="address-list">
                                            <li><strong>contracts/Staking.sol</strong> <span class="network-badge" style="background:#fee2e2;">audit en cours</span></li>
                                            <li><strong>test/Staking.t.sol</strong> <span class="network-badge">tests</span></li>
                                        </ul>
                                    </div>
                                    
                                    <!-- PROBL√àMES D√âTECT√âS -->
                                    <div style="margin: 20px 0; background: #fee2e2; padding: 20px; border-radius: 10px;">
                                        <h4 style="color: #991b1b;">üî¥ Vuln√©rabilit√©s d√©tect√©es</h4>
                                        <ul style="margin-left: 20px;">
                                            <li><strong>Reentrancy</strong> dans withdraw() - Ligne 42</li>
                                            <li><strong>Integer overflow</strong> possible dans calculateRewards()</li>
                                        </ul>
                                    </div>
                                    
                                    <!-- RECOMMANDATIONS -->
                                    <div style="margin: 20px 0; background: #fff3cd; padding: 20px; border-radius: 10px;">
                                        <h4 style="color: #856404;">üí° Recommandations</h4>
                                        <ul style="margin-left: 20px;">
                                            <li>Ajouter ReentrancyGuard</li>
                                            <li>Utiliser SafeMath (ou Solidity 0.8+)</li>
                                            <li>Revoir le calcul des r√©compenses</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    
                    <!-- SC_003 - NFT Collection -->
                    <tr onclick="toggleDetail('sc003-detail')">
                        <td><strong>SC_003</strong></td>
                        <td>NFT Collection</td>
                        <td><span class="sprint-badge">SPRINT-001</span></td>
                        <td>0.8.18</td>
                        <td>NFT.sol</td>
                        <td style="font-family: monospace;">0x7ceB...f619</td>
                        <td><span class="network-badge">Polygon</span></td>
                        <td><span class="contract-status status-deployed">‚úÖ D√©ploy√©</span></td>
                    </tr>
                    <tr id="sc003-detail" style="display: none;">
                        <td colspan="8">
                            <div class="contract-detail active">
                                <div class="synthesis-card">
                                    <div class="synthesis-title">üìã Synth√®se SC_003 - NFT Collection</div>
                                    
                                    <div class="synthesis-text">
                                        <strong>Objectif :</strong> Collection NFT ERC721 avec mint, reveal et royalties.
                                    </div>
                                    
                                    <!-- FICHIERS -->
                                    <div style="margin: 20px 0;">
                                        <h4>üìÅ Fichiers</h4>
                                        <ul class="address-list">
                                            <li><strong>contracts/NFT.sol</strong> <span class="network-badge">contrat principal</span></li>
                                            <li><strong>contracts/NFTRenderer.sol</strong> <span class="network-badge">m√©tadonn√©es</span></li>
                                        </ul>
                                    </div>
                                    
                                    <!-- ADRESSES -->
                                    <div style="margin: 20px 0;">
                                        <h4>üåê Adresses</h4>
                                        <ul class="address-list">
                                            <li>
                                                <span><strong>Polygon</strong> - 0x7ceB23fD6bC0adD59E62aC25578270cFf1b9f619</span>
                                                <a href="#" class="address-link">Voir sur Polygonscan ‚Üí</a>
                                            </li>
                                        </ul>
                                    </div>
                                    
                                    <!-- STATISTIQUES -->
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                        <div>
                                            <h4>üìä Statistiques</h4>
                                            <p>Total minted: 3,456 / 10,000</p>
                                            <p>Propri√©taires uniques: 2,847</p>
                                            <p>Volume: 1,234 MATIC</p>
                                        </div>
                                        <div>
                                            <h4>‚öôÔ∏è Fonctions</h4>
                                            <p>mint(), reveal(), setRoyalties()</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p>23 contrats ‚Ä¢ 12 d√©ploy√©s ‚Ä¢ 8 audit√©s ‚Ä¢ Derni√®re mise √† jour: 22/02/2026</p>
        </div>
    </div>
    
    <script>
        function toggleDetail(id) {
            const detail = document.getElementById(id);
            detail.style.display = detail.style.display === 'none' ? 'table-row' : 'none';
        }
        
        function filterTable() {
            const sprint = document.getElementById('filter-sprint').value;
            const status = document.getElementById('filter-status').value;
            const network = document.getElementById('filter-network').value;
            const version = document.getElementById('filter-version').value;
            
            const rows = document.querySelectorAll('#table-body > tr:not([id^=detail])');
            let visibleCount = 0;
            
            rows.forEach(row => {
                const cells = row.cells;
                let show = true;
                
                if (sprint !== 'all' && !cells[2].innerText.includes(sprint)) show = false;
                if (version !== 'all' && cells[3].innerText !== version) show = false;
                
                const statusText = cells[7].innerText;
                if (status === 'deployed' && !statusText.includes('D√©ploy√©') && !statusText.includes('Production')) show = false;
                if (status === 'audited' && !statusText.includes('Audit√©')) show = false;
                if (status === 'testnet' && !statusText.includes('Testnet')) show = false;
                if (status === 'production' && !statusText.includes('Production')) show = false;
                
                const networks = cells[6].innerText;
                if (network !== 'all' && !networks.toLowerCase().includes(network)) show = false;
                
                row.style.display = show ? '' : 'none';
                visibleCount += show ? 1 : 0;
                
                // Cacher les d√©tails
                const nextRow = row.nextElementSibling;
                if (nextRow && nextRow.id) nextRow.style.display = 'none';
            });
            
            document.getElementById('result-count').innerText = visibleCount + ' r√©sultats';
        }
        
        function resetFilters() {
            document.getElementById('filter-sprint').value = 'SPRINT-000';
            document.getElementById('filter-status').value = 'all';
            document.getElementById('filter-network').value = 'all';
            document.getElementById('filter-version').value = 'all';
            document.getElementById('filter-standard').value = 'all';
            filterTable();
        }
        
        function filterByStatus(status) {
            document.getElementById('filter-status').value = status;
            filterTable();
        }
        
        function filterByNetwork(network) {
            document.getElementById('filter-network').value = network;
            filterTable();
        }
        
        function filterByStandard(standard) {
            document.getElementById('filter-standard').value = standard;
            filterTable();
        }
        
        document.querySelectorAll('.filter-select').forEach(s => s.addEventListener('change', filterTable));
        window.onload = filterTable;
    </script>
</body>
</html>